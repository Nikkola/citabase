define(["jquery","lodash","backbone","events","app","sessionModel","text!../../../templates/pass_recovery.phtml"],function(e,t,n,r,i,s,o){i.Views.PassRecoveryView=n.View.extend({el:".main",initialize:function(){},render:function(){this.$el.html(o),this.validate()},events:{"change .recovery-pass-form input":"checkBtnActive","click .recover-btn":"sendPass"},checkBtnActive:function(){var t=e(".recover-btn");e(".recovery-pass-form").valid()?t.removeClass("disabled").removeAttr("disabled"):t.addClass("disabled").attr("disabled","disabled")},sendPass:function(t){t.preventDefault();var n=e(".recovery-pass-form").serializeArray();e.ajax({type:"POST",url:"/recovery",dataType:"json",data:n,success:function(t){t&&e("#recover-pass-popup").modal()}})},validate:function(){e(".recovery-pass-form").validate({rules:{email:{required:!0,email:!0},password:{minlength:8,required:!0},passwordConfirmation:{minlength:8,required:!0,equalTo:"#password"}},messages:{email:"Пожалуйста, введите корректный email",password:{required:"Пожалуйста, введите пароль",minlength:"Ваш пароль должен быть не меньше 8 символов"},passwordConfirmation:{required:"Пожалуйста, введите пароль повторно",equalTo:"Пароли отличаются"}},highlight:function(t){e(t).closest(".control-group").removeClass("success").addClass("error")},success:function(e){e.addClass("control-label").text("OK!").addClass("valid").closest(".control-group").removeClass("error").addClass("success")}})}});var u=new i.Views.PassRecoveryView;return u});