define(["jquery","lodash","backbone","events","app","sessionModel","text!../../../templates/forget_pass.phtml"],function(e,t,n,r,i,s,o){i.Views.ForgetPassView=n.View.extend({el:".main",initialize:function(){},render:function(){this.$el.html(o),this.validate()},events:{"change .forget-form input":"checkBtnActive","click .forget-btn":"sendPass"},checkBtnActive:function(){var t=e(".forget-btn");e(".forget-form").valid()?t.removeClass("disabled").removeAttr("disabled"):t.addClass("disabled").attr("disabled","disabled")},sendPass:function(t){t.preventDefault();var n=e(".forget-form #email").val();e.ajax({type:"POST",url:"/forget",dataType:"json",data:{email:n},success:function(t){t===n&&e("#forget-pass-popup").modal()}})},validate:function(){e(".forget-form").validate({rules:{email:{required:!0,email:!0}},messages:{email:"Пожалуйста, введите корректный email"},highlight:function(t){e(t).closest(".control-group").removeClass("success").addClass("error")},success:function(e){e.addClass("control-label").addClass("valid").closest(".control-group").removeClass("error").addClass("success")}})}});var u=new i.Views.ForgetPassView;return u});